---
## Front matter
lang: ru-RU
title: Лабораторная работа № 1
subtitle: Простые модели компьютерной сети
author:
  - Морозов М. Е.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 20 апреля 2024

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Морозов Михаил Евгеньевич
  * студент группы НКНбд-01-21
  * Российский университет дружбы народов

:::
::::::::::::::

# Введение

## Цели работы

- Приобретение навыков моделирования сетей передачи данных с помощью средства имитационного моделирования NS-2
- Анализ полученных результатов моделирования

## Теоретическое введение

Network Simulator (NS-2) — один из программных симуляторов моделирования процессов в компьютерных сетях. 
NS-2 позволяет описать топологию сети, конфигурацию источников и приёмников трафика, параметры соединений 
(полосу пропускания, задержку, вероятность потерь пакетов и т.д.) и множество других параметров моделируемой системы. 
Данные о динамике трафика, состоянии соединений и объектов сети, а также информация о работе протоколов фиксируются в генерируемом trace-файле.

# Выполнение работы
## Этап 1.1
В начале мы создали отдельные директории для нашего предмета и лабораторных работ, далее мы начали выполнять описанные в методическом материале этапы.

1.1)Шаблон сценария для NS-2 

После выполнения всех этапов для создания шаблона получаем вот такой шаблон, который мы будем ис-пользовать далее, для того чтобы копировать основную информацию, а затем использовать имеющиеся дан-ные при выполнении следующих заданий.

## Написали первый скрипт и визуализировали модель. (рис. [-@fig:001])

![Сеть передачи данных, состоящая из двух узлов, соединённых дуплексной линией связи](img/lab1example1.png){#fig:001 width=70%}

## Этап 1.2

Простой пример описания топологии сети, состоящей из двух узлов и одного соединения 

Постановка задачи. Требуется смоделировать сеть передачи данных, состоящую из двух узлов, соединённых дуплекс-ной линией связи с полосой пропускания 2 Мб/с и задержкой 10 мс, очередью с обслуживанием типа DropTail. От одного узла к другому по протоколу UDP осуществляется передача пакетов, размером 500 байт, с постоянной скоро-стью 200 пакетов в секунду. 

После того как мы прочитали задачу, и методический материал с вариантом выполнения этой задачи, мы переписали его и протестировали, а также зафиксировали несколько новых элементов, которые помогут нам в будущем.


## Написали скрипт для немного усложнённой модели и визуализировали. (рис. [-@fig:002])

![Сеть, состоящая из 4 узлов, между узлами n0 и n2, n1 и n2 установлено дуплексное соединение, между узлами n2 и n3 скорость ниже и задержка выше](img/lab1example2.png){#fig:002 width=70%}

## Этап 1.3

Постановка задачи. Описание моделируемой сети
1) сеть состоит из 4 узлов (n0, n1, n2, n3); 
2)между узлами n0 и n2, n1 и n2 установлено дуплексное соединение с пропускной способностью 2 Мбит/с и задержкой 10 мс; 
3)между узлами n2 и n3 установлено дуплексное соединение с пропускной способ- ностью 1,7 Мбит/с и задержкой 20 мс; 
4)каждыйузелиспользуеточередьсдисциплинойDropTailдлянакопленияпакетов, максимальный раз-мер которой составляет 10; 
5)TCP-источник на узле n0 подключается к TCP-приёмнику на узле n3 (по-умолчанию, максимальный размер пакета, который TCP-агент может генери- ровать, равняется 1KByte) 
6)TCP-приёмник генерирует и отправляет ACK пакеты отправителю и откидывает полученные пакеты; 
7)UDP-агент, который подсоединён к узлу n1, подключён к null-агенту на узле n3 (null-агент просто от-кидывает пакеты); 
8)генераторы трафика ftp и cbr прикреплены к TCP и UDP агентам соответственно; 
9)генератор cbr генерирует пакеты размером 1 Кбайт со скоростью 1 Мбит/с; 
10)работа cbr начинается в 0,1 секунду и прекращается в 4,5 секунды, а ftp начинает 
работать в 1,0 секунду и прекращает в 4,0 секунды.

После прочтения всех вводных данных по этой модели, мы выполнили предложенное в методическом материале решение, и получило вот такой вывод.

## Написали скрипт для сети с кольцевой топологией. (рис. [-@fig:003])

![Узлы обмениваются данными](img/lab1example3.png){#fig:003 width=70%}

## Этап 2.1
Внесите следующие изменения в реализацию примера с кольцевой топологией сети: 
1)топология сети должна соответствовать представленной на рис. 1.7; 
2)передачаданныхдолжнаосуществлятьсяотузлаn(0)доузлаn(5)пократчай- шему пути в течение 5 се-кунд модельного времени; 
3)передача данных должна идти по протоколу TCP (тип Newreno), на принимаю- щей стороне исполь-зуется TCPSink-объект типа DelAck; поверх TCP работает протокол FTP с 0,5 до 4,5 секунд модельного времени; 
4)с 1 по 2 секунду модельного времени происходит разрыв соединения между узлами n(0) и n(1); 
5)при разрыве соединения маршрут передачи данных должен измениться на ре- зервный, после вос-становления соединения пакеты снова должны пойти по кратчайшему пути.

## Этап 2.1
После выполнения всех примеров, описанных в методическом материале мы приступили к выполнению соб-ственного задания. Итак, вот код который реализует работу по заданным условиям:

```ns2
set ns [new Simulator]
$ns rtproto DV
set nf [open out.nam w]
$ns namtrace-all $nf
set f [open out.tr w]
$ns trace-all $f
proc finish {} {
 	global ns f nf 
	$ns flush-trace
 	close $f 
	close $nf
 	exec nam out.nam & 
exit 0
}
set N 5
for {set i 0} {$i < $N} {incr i} {
 	set n($i) [$ns node]
}
for {set i 0} {$i < $N} {incr i} {
	$ns duplex-link $n($i) $n([expr ($i+1)%$N]) 1Mb 10ms DropTail
}
```
## Этап 2.1
```ns2
set n(5) [$ns node]
$ns duplex-link $n(1) $n(5) 1Mb 10ms DropTail
set tcp0 [new Agent/TCP/Newreno]
$ns attach-agent $n(0) $tcp0
set ftp [new Application/FTP]
$ftp attach-agent $tcp0
$ftp set packetSize_ 500
$ftp set interval_ 0.005
set sink0 [new Agent/TCPSink/DelAck]
$ns attach-agent $n(5) $sink0
$ns connect $tcp0 $sink0
$ns at 0.5 "$ftp start"
$ns rtmodel-at 1.0 down $n(0) $n(1)
$ns rtmodel-at 2.0 up $n(0) $n(1)
$ns at 4.5 "$ftp stop"

$ns at 5.0 "finish"
$ns run
```

## Внесли изменения в предыдущий скрипт, чтобы он соответствовал требованиям упражнения. (рис. [-@fig:004])

![Визуализация](lab1exercise.png){#fig:004 width=70%}

# Выводы

- Приобрели навыки моделирования сетей передачи данных с помощью средства имитационного моделирования NS-2
- Проанализировали полученных результатов моделирования
- Применили полученные знания, выполнив задание
