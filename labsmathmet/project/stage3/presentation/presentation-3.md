---
## Front matter
lang: ru-RU
title: "Групповой проект. Тема: Рост дендритов"
subtitle: "Этап 3"
author:
	- Артамонов Т. Е.,
	- Федорина Э. В.,
	- Морозов М. E.,
	- Коротун И. И.,
	- Маслова А. С.
institute: Российский Университет Дружбы Народов, Moscow, Russian Federation

date: 7 марта 2024

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---

# Информация

## Состав исследовательской команды

Студенты группы НКНбд-01-21

- Артамонов Тимофей Евгеньевич
- Федорина Эрнест Васильевич
- Морозов Михаил Евгеньвич
- Коротун Илья Игоревич
- Маслова Анастасия Сергеевна

# Вводная часть
На третьем этапе группового проекта нужно описание программную реализацию проекта. На прошлом этапе мы уже рассмотрели алогритм по которому мы будем двигаться при выполнении этого этапа. Приступим к описанию кода.

## Шаг 0 Используемые библиотеки 

- using Plots: Библиотека для визуализации данных. В данном коде используем для создания тепловой карты, отображающей состояние сетки после симуляции роста дендритов.
- using LinearAlgebra: Библиотека для работы с линейной алгеброй. Используем, для операций с векторами и матрицами в вычислениях.


```Julia

using Plots
using LinearAlgebra

```
## Шаг 1 Параметры модели

Указываем основные параметрыры моделирования:

N: размер сетки, представляющий собой квадратную сетку N x N, на которой будет происходить моделирование.
T_melt: температура плавления, определяющая порог, при котором материал начинает затвердевать.
growth_chance: увеличенный шанс роста дендритов в соседние ячейки, это вероятность, с которой новые дендриты будут расти в окружающие зоны с пониженной температурой.
steps: количество шагов симуляции, определяющее, сколько раз будет произведено обновление состояния сетки.



```Julia

N = 100                  
T_melt = 1.0             
growth_chance = 0.005     
steps = 8000              

```
## Шаг 2 Инициализация сетки
Создаем матрицу T размером N x N, инициализируя ее нулями.
Задаем начальную затравочную область в виде круга с заданным радиусом и центром.


```Julia
T = zeros(N, N)

# Увеличение размера начальной затравочной области
center = div(N, 2)
radius = 1  # Радиус затравочной области
for i in (center-radius):(center+radius)
    for j in (center-radius):(center+radius)
        T[i, j] = T_melt
    end
end
          
```

## Шаг 3 Параметры для условия Стефана
Определяем коэффициенты теплопроводности, плотности, латентной теплоты и температуру на границе.
Используем эти парамметры для вычисления скорости роста кристалла по условию Стефана.

```Julia
κ = 0.1   # Теплопроводность
ρ = 1.0   # Плотность
L = 1.0   # Латентная теплота
Tb = T_melt  # Температура на границе

```
## Шаг 4 Функция роста
Эта функция выполняет основную часть моделирования роста дендритов. Она итерирует указанное количество шагов по сетке и обновляет ее состояние в соответствии с правилами роста кристалла и уравнением теплопроводности.



Уравнение теплопроводности:



1.Создается временная копия текущего состояния сетки T.



2.Перебираются все внутренние ячейки сетки.



3.Если температура в ячейке равна температуре плавления, вычисляется градиент температуры в соседних ячейках.



4.Для каждой соседней ячейки вычисляется градиент температуры и скорость роста кристалла по условию Стефана.



5.Если случайное число меньше произведения шанса роста на скорость роста, ячейка затвердевает на следующем шаге, и это отражается во временной копии сетки.



Обновление основной сетки:
        После завершения всех шагов симуляции, основная сетка T обновляется копией T_temp.

## Шаг 4

```Julia
function grow_crystals_stefan!(T)
    for step in 1:steps
        T_temp = copy(T)  # Создаем временную копию для текущего шага
        for i in 2:N-1
            for j in 2:N-1
                if T[i, j] == T_melt
                    for di in -1:1
                        for dj in -1:1
                            if T[i+di, j+dj] == 0
                                # Вычисляем градиенты температуры в соседних ячейках
                                ∇T_s = [T[i+di, j+dj] - T[i, j] for (di, dj) in [(-1, 0), (1, 0), (0, -1), (0, 1)]]
                                ∇T_l = [Tb - T[i, j] for _ in 1:4]
                                # Умножаем градиенты для диагональных элементов на 2
                                ∇T_s[1] /= 2
                                ∇T_s[2] /= 2
                                # Вычисляем вектор нормали к границе затвердевания
                                n = [di + dj for (di, dj) in [(-1, 0), (1, 0), (0, -1), (0, 1)]]
                                # Вычисляем скорость роста кристалла по условию Стефана
                                v = κ / (ρ * L) * dot(n, ∇T_s - ∇T_l)
                                if rand() < growth_chance * v
                                    T_temp[i+di, j+dj] = T_melt  # Затвердевание на следующем шаге
                                end
                            end
                        end
                    end
                end
            end
        end
        T .= T_temp  # Обновляем основную сетку
    end
end

```

## Шаг 5 Визуализация итогового состояния
После выполнения симуляции функцией роста, код строит тепловую карту (heatmap) для визуализации конечного состояния сетки T.

```Julia

#Выполнение симуляции
grow_crystals_stefan!(T)

#Визуализация итогового состояния
p = heatmap(T, color=:ice, aspect_ratio=1, title="Модель роста дендритов с условием Стефана")
display(p)
```
## График модели

[plot](image/1.png){ #fig:001 width=70%}

# Вывод
Модель роста дендритов, реализованная с использованием условия Стефана и уравнения теплопроводности, позволяет имитировать процесс затвердевания материала и формирования кристаллических структур.После завершения всех шагов симуляции, модель предоставляет визуализацию итогового состояния сетки с помощью тепловой карты. 
